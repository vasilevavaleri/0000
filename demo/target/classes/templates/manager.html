<!-- Add Service Form -->
<label for="newServiceName"></label>
<input type="text" id="newServiceName" placeholder="Название услуги">
<label for="newServiceDescription"></label>
<textarea id="newServiceDescription" placeholder="Описание услуги"></textarea>
<label for="newServicePrice"></label>
<input type="text" id="newServicePrice" placeholder="Цена">
<button onclick="addService()">Добавить</button>

<!-- Service Search and Deletion -->
<label for="deleteServiceSearch"></label>
<input type="text" id="deleteServiceSearch" placeholder="Удалить услугу">
<button onclick="searchAndDeleteService()">Найти и удалить</button>


<!-- Feedback Management -->
<h2>Feedbacks</h2> <!-- Heading for feedbacks -->
<div id="feedbackManagement"></div>

<script>
    // JavaScript functions for adding, searching, and deleting services
    function addService() {
        var name = document.getElementById('newServiceName').value;
        var description = document.getElementById('newServiceDescription').value;
        var price = document.getElementById('newServicePrice').value;
        fetch('/services/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({name: name, description: description, price: price})
        })
            .then(response => response.json())
            .then(data => {
                console.log('Service added:', data);
            })
            .catch(error => console.error('Error:', error));
    }

    function searchAndDeleteService() {
        var serviceName = document.getElementById('deleteServiceSearch').value;
        fetch(`/services/search?name=${encodeURIComponent(serviceName)}`)
            .then(response => response.json())
            .then(data => {
                console.log(data);
                if (data && data.length > 0) {
                    const serviceId = data[0].id; // Assuming each service has an id and taking the first result for simplicity
                    if (confirm(`Do you want to delete the service: ${data[0].name}?`)) {
                        fetch(`/services/delete/${serviceId}`, {
                            method: 'DELETE'
                        })
                            .then(delResponse => {
                                if (delResponse.ok) {
                                    console.log('Service deleted');
                                } else {
                                    console.error('Deletion failed');
                                }
                            })
                            .catch(error => console.error('Error:', error));
                    }
                }
            })
            .catch(error => console.error('Error:', error));
    }

    function manageFeedbacks(serviceId) {
        fetch(`/feedbacks/manage/${serviceId}`)
            .then(response => response.json())
            .then(data => {
                console.log('Feedbacks for service:', data);
                // Further processing or display of feedbacks could go here
            })
            .catch(error => console.error('Error:', error));
    }
</script>
<head>
    <title>Сотрудники</title>
</head>
<body>
<h1>Менеджер сотрудников</h1>

<h2>Добавить нового сотрудника</h2>
<form action="/employee/add" method="post">
    ФИО: <input type="text" name="fullName">
    Стаж работы: <input type="number" name="experience">
    Дата рождения: <input type="date" name="dateOfBirth">
    Специализация: <input type="text" name="specialization">
    <button type="submit">Add Employee</button>
</form>

    <h2>Список сотрудников</h2>
    <ul>
        <#list employees as employee>
            <li>
                ${employee.fullName} - ${employee.specialization}
                <form action="/employee/delete/${employee.id}" method="post">\
                    <button type="submit">Удалить</button>
                 </form>
            </li>
         </#list>
    </ul>
</body>
</html>